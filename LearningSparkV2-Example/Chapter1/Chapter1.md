## Chatper 1. 아파치 스파크 소개 : 통합 분석 엔진

### Introduction
- 구글은 대규모 데이터의 저장, 처리, 분석, 검색, 추천 등을 위해 분산 처리 시스템과 빅데이터 기술을 중요하게 다뤄왔다.
- 그 결과, 구글 파일 시스템(Google File System), 맵리듀스(MapReduce), 빅테이블(BigTable) 등을 만들어냈다.
    - 구글 파일 시스템(Google File System) : 대규모 클러스터에서 서버가 내결합성을 가지는 분산 파일시스템
        - 하둡 파일 시스템(HDFS)
    - 빅테이블(BigTable) : GFS를 기반으로 정형화된 대규모 데이터의 저장 수단을 제공
        - HBase
    - 맵리듀스(MapRedue) : 함수형 프로그래밍 개념을 기반으로 GFS와 빅테이블 위에서 대규모 데이터 분산 처리 프레임워크
        - 분산 시스템의 특성 기반 데이터의 지역성과 랙(rack)의 접근성을 고려한다.
     
#### 하둡(Hadoop)
- 하둡(Hadoop)은 대규모 데이터를 분산 처리할 수 있는 자바 기반의 오픈소스 프레임워크이다.

#### 스파크(Spark)
- 하둡 맵리듀스 작업에 참여한 UC 버클리의 연구원들은 비효율적이고 배우기 힘든 단점들을 인지해 단순하고 빠르고 더 쉬운 스파크 프레임워크를 개발하는 것을 생각했다.
- 높은 내결함성, 높은 병렬성, 메모리에 중간값을 저장, 쉽고 구성이 간편한 API를 다양한 언어로 제공함 등을 초기 프로젝트 개발로 생각했다.

### 스파크 설계 철학의 4요소
##### 1) 속도
- CPU와 메모리 성능의 향상 등으로 인한 속도 향상
  
##### 2) 사용편리성 
- 스파트는 고수준 데이터 추상화 계층(ex. 데이터프레임/데이터셋) 아래에 유연한 분산 데이터세트(RDD)라 불리는 단순한 논리 자료구조를 구축

##### 3) 모듈성
- 문서화가 잘 된 API로 구성된 통합 라이브러리 제공

##### 4) 확장성
- 스파크는 빠른 병렬 연산 엔진에 초점 맞춰져있고, 저장과 연산을 분리

### 단일화된 스택으로의 아파치 컴포넌트

- 스파크는 네개의 다양한 워크로드를 위한 라이브러리로 스파크 SQL, 스파크 MLlib, 스파크 정형화 스트리밍, GraphX를 제공

##### 1. 스파크 SQL
- RDBMS 테이블이나 구조화된 데이터의 파일 포맷 데이터를 읽어 들일 수 있음
- 그 데이터로 영구적이거나 임시적인 테이블 생성 가능

##### 2.스파크 MLib
- 스파크에는 MLib라 불리는 범용 머신러닝 알고리즘들을 포함한 라이브러리가 들어있다.
    - ‘Mlib’라는 표현은 아파치 스파크의 머신러닝 통합 라이브러리를 의미한다.
- MLib은 모델을 구축하기 위한 고수준 데이터 프레임 기반 API 기반으로, 여러 인기 있는 머신러닝 알고리즘을 제공한다.

##### 3. 스파크 정형화 스트리밍
- 아파치 스파크 2.0은 실험적으로 스파크 SQL엔진과 데이터프레임 기반 API위에 연속적 스트리밍 모델과 정형화 스트리밍 API를 소개했다.

##### 4. Graph X
- 그래프를 조작하고 ex) SNS 친구 관계 그래프, 경로 등
- 그래프 병렬 연산을 수행하기 위한 라이브러리

###  아파치 스파크의 분산 실행
- 스파크는 분산 데이터 처리 엔진이며, 각 컴포넌트들이 클러스터의 머신들 위에서 협업해 동작한다

#### 배포 모드
- 스파크의 특징: 여러 다른 환경에서 다른 설정으로 돌아갈 수 있도록 → 다양한 배포 모드
- 스파크 드라이버, 스파크 이그제큐터, 클러스터 매니저 모드

#### 분산 데이터와 파티션
- 실제 물리 데이터는 HDFS나 클라우드 저장소에 존재하는 파티션이 되어 저장소 전체에 분산됨
- 각 스파크 이그제큐터는 가급적이면 데이터 지역성을 고려하여 네트워크에서 가장 가까운 파티션을 읽어 들이도록 테스크를 할당함 (항상 가능한 것은 아님)
- 파티셔닝은 효과적인 병렬 처리 가능

#### 데이터 과학 업무
- 빅데이터 시대에 독보적인 위치를 구축하기 위한 규범으로서의 데이터 과학 → 데이터 스토리텔링
- 스파크 MLlib
- 스파크 SQL과 셸
- 스파크 프로젝트 하이드로젠 (Project Hydrogen) 중, 갱 스케줄러 (gang)

#### 데이터 엔지니어링 업무
- 정형화 스트리밍 + 연속적 애플리케이션 (continupus applications)
- 스파크 2.x → 3.0 성능 향상

#### 스파크 사용사례
- 클러스터 전체에 걸쳐 분산된 대규모 데이터셋의 병렬처리
- 데이터 탐색이나 시각화를 위한 일회성이나 대화형 질의 수행
- MLlib을 이용해 머신러닝 모델을 구축, 훈련, 평가하기
- 다양한 데이터 스트림으로부터 끝에서 끝까지 데이터 파이프라인 구현
- 그래프 데이터셋과 소셜 네트워크(social netowrk) 분석
